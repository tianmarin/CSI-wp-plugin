{"version":3,"sources":["basic.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"csi-template-js.min.js","sourcesContent":["/*\nScript Name: Shortcode EWA Control Center\nDependencies: jquery, bootstrap, amcharts, amcharts-serial, amcharts-responsive, amcharts-pie\n*/\n/*global document*/\n/*global csiTemplateScript*/\n/*global FormData*/\n/*global jconfirm*/\n/*global moment*/\n/*global AmCharts*/\njQuery(document).ready(function($){\n/*\n* Global Variables\n*/\nvar cmpMainContent \t=\t$('.csi-template-main-content');\nvar ajaxPages={\n\t'intro'\t \t\t:   'csi_cmp_build_page_intro',\n\t'listplans'\t\t:\t'csi_cmp_build_page_list_plans',\n\t'addplan'\t\t:\t'csi_cmp_build_page_new_plan_form',\n\t'editplan'\t\t:\t'csi_cmp_build_page_edit_cmp_form',\n\t'showplan'  \t:   'csi_cmp_build_page_show_plan',\n\t'addtask'   \t:   'csi_cmp_build_page_new_task_form',\n\t'showtask'\t\t:\t'csi_cmp_build_page_show_task',\n\t'edittask'\t\t:\t'csi_cmp_build_page_edit_task_form',\n\t'listservices'\t:\t'csi_cmp_build_page_list_services',\n\t'showservice'\t:\t'csi_cmp_build_page_show_service',\n\t'editservice'\t:\t'csi_cmp_build_page_edit_service_form',\n\t'edittaskplan'\t:\t'csi_cmp_build_page_task_steps_import',\n\t'scheduletask'\t:\t'csi_cmp_build_page_schedule_task',\n\t'addservice'\t:\t'csi_cmp_build_page_new_service_form',\n\t'dashboard'\t\t:\t'csi_cmp_dashboard_build_page',\n\t'capacity'\t\t:\t'csi_cmp_capacity_build_page',\n\t'keynote'\t\t:\t'csi_cmp_keynote_build_page',\n\n};\najaxPages.intro\t\t=\tcmpMainContent.data('default-action');\n\nvar changeHash = function ( nextPage ) {\n\tif ( undefined !== nextPage &&  '' !== nextPage ){\n\t\twindow.location.hash='#!' + nextPage;\n\t}\n\treturn true;\n};\n\n\n\n$(document).on({\n\tajaxStart\t: function() {\n\t\t$('#csi-template-cmp-control-center-ajax').fadeIn();\n\t},\n\tajaxStop\t: function() {\n\t\tsetTimeout(function(){\n\t\t\t$('#csi-template-cmp-control-center-ajax').fadeOut();\n\t\t}, 1000);\n\t}\n});\nvar aaAjaxError = function(jqXHR, textStatus, errorThrown){\n\tvar msg = '';\n\tif (jqXHR.status === 0) {\n\t\tmsg = 'Not connect.\\n Verify Network.';\n\t} else if (jqXHR.status === 404) {\n\t\tmsg = 'Requested page not found. [404]';\n\t} else if (jqXHR.status === 500) {\n\t\tmsg = 'Internal Server Error [500].';\n\t} else if (textStatus === 'parsererror') {\n\t\tmsg = 'Requested JSON parse failed.';\n\t} else if (textStatus === 'timeout') {\n\t\tmsg = 'Time out error.';\n\t} else if (textStatus === 'abort') {\n\t\tmsg = 'Ajax request aborted.';\n\t} else {\n\t\tmsg = 'Uncaught Error.\\n' + jqXHR.responseText;\n\t}\n\twindow.console.log('ERROR: ');\n\twindow.console.log(jqXHR);\n\twindow.console.log(textStatus+' - '+errorThrown);\n\tvar text='Este error de conexión con el servidor de fondo, regularmente indica que no has iniciado sesión en Wordpress.<br/>';\n\twindow.console.log(csiTemplateScript.ajaxUrl);\n\tvar url = csiTemplateScript.ajaxUrl.replace('admin-ajax.php', '');\n\ttext=text+'Intenta <strong><a href=\"' + url + '\">iniciar sesi&oacute;n</a></strong>. En caso que esto no funcione, por favor contacta al adminsitrador.';\n\ttext=text+'<code>' + msg + '</code>';\n\tvar title = 'Error de conexión as&iacute;ncrona';\n\t$.alert({\n\t\tbuttons:{\n\t\t\tOK: {\n\t\t\t\ttext: 'OK',\n\t\t\t\tbtnClass: 'btn-danger',\n\t\t\t},\n\t\t},\n\t\tcloseIcon: true,\n\t\tcolumnClass: 'large',\n\t\tcontent:text,\n\t\ttitle: title,\n\t\ttype:'red',\n\t});\n};\n\n//llamada Ajax para cargar contenido.\n\t//si sale bien\n\t\t//si hay error\n\t\t//sino\n\t\t\t//apagar lo actual\n\t//si sale mal\n\t\t//$.alert\n\t\t//guardar log (sm21)\n$(window).bind( 'hashchange', function(event) {\n\tevent.preventDefault();\n\t//eval hash in the url\n\tvar hash = '';\n\tvar hashRegEx = /\\#\\!(\\w+)/;\n\tif ( hashRegEx.test(window.location.hash) ){\n\t\thash = window.location.hash.match(hashRegEx)[1];\n\t}else{\n\t\treturn false;\n\t}\n\t//eval GET Variables in the URL\n\tvar getRegEx = /(\\w+=\\w+)+/g;\n\tvar GET=[];\n\tif ( getRegEx.test(window.location.hash) ){\n\t\t$.each( window.location.hash.match( getRegEx ), function ( key, val ) {\n\t\t\tvar parameter = val.split('=');\n\t\t\tGET[parameter[0]] = parameter[1];\n\t\t});\n\t}else{\n\t\tGET = null;\n\t}\n\t//eval softGET Variables in the URL\n\tvar sGetRegEx = /\\/(\\w+)/g;\n\tvar sGET=[];\n\tif ( sGetRegEx.test(window.location.hash) ){\n\t\tsGET = window.location.hash.match( sGetRegEx );\n\t}else{\n\t\tsGET = null;\n\t}\n\n\tswitch ( hash ){\n\t\tcase '':\n\t\t\t$.alert({\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcolumnClass: 'large',\n\t\t\t\tcontent:'He ocurrido un error al llamar al enlace.',\n\t\t\t\ttitle: 'Acceso incorrecto',\n\t\t\t\ttype:'red',\n\t\t\t});\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tloadPageContent(hash, GET, sGET);\n\t}\n\treturn true;\n});\nif( window.location.hash === '' ){\n\twindow.location.hash='#!intro';\n\t$(window).trigger( 'hashchange' ); // user refreshed the browser, fire the appropriate function\n}else{\n\t$(window).trigger( 'hashchange' ); // user refreshed the browser, fire the appropriate function\n}\n\nfunction loadPageContent ( hash, get ) {\n\tvar GET = get;\n\tvar data = new FormData();\n\tconsole.log ( 'Llamando a pagina : ' + ajaxPages[hash] + '(' + hash + ')');\n\tdata.append ( 'action', ajaxPages[hash] );\n\tif ( null !== GET ){\n\t\tfor ( var item in GET){\n\t\t\tdata.append ( item, GET[item] );\n\t\t}\n\t}\n\t$.ajax({\n\t\turl: csiTemplateScript.ajaxUrl,\n\t\ttype: 'POST',\n\t\tdata: data,\n\t\tcache: false,\n\t\tdataType: 'json',\n\t\tprocessData: false,\n\t\tcontentType: false,\n\t\tbeforeSend: function () {\n\t\t},\n\t\tsuccess: function(response){\n\t\t\t//console.log(response);\n\t\t\t$('html, body').animate({ scrollTop: 0 }, '300');\n\t\t\tvar animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';\n\t\t\tcmpMainContent.addClass('quick-animated ' + 'fadeOutDown').one(animationEnd, function() {\n\t\t\t\t$(this).removeClass('quick-animated ' + 'fadeOutDown');\n\t\t\t\t$(this).html(response.message);\n\t\t\t\tcsiHardRefreshEventListener(response);\n\t\t\t\tcmpMainContent.addClass('quick-animated ' + 'fadeInUp').one(animationEnd, function() {\n\t\t\t\t\t$(this).removeClass('quick-animated ' + 'fadeInUp');\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\terror: aaAjaxError,\n\t});\n}\nfunction csiTemplateCmpFetchTableContent( tableSelector ){\n\tvar table = tableSelector;\n\tvar data = new FormData();\n\tconsole.log ( 'Refrescando: ' + table.prop('id') );\n\t$.each(table.data(),function(index,val){\n\t\tdata.append(index,val);\n\t});\n\t$.ajax({\n\t\turl: csiTemplateScript.ajaxUrl,\n\t\ttype: 'POST',\n\t\tdata: data,\n\t\tcache: false,\n\t\tdataType: 'json',\n\t\tprocessData: false,\n\t\tcontentType: false,\n\t\tbeforeSend: function () {\n\t\t\ttable.addClass('ajax-loading');\n\t\t},\n\t\tsuccess: function(response){\n\t\t\tsetTimeout(function(){\n\t\t\t\ttable.removeClass('ajax-loading');\n\t\t\t}, 500);\n\t\t\tif ( 0 === response ){\n\t\t\t\tconsole.log ( 'No se recibó respuesta válida de : ' + table.data('action') );\n\t\t\t}else{\n\t\t\t\tif ( undefined !== response.chart){\n\t\t\t\t\t//console.log ( JSON.stringify ( response.chart ) );\n\t\t\t\t\tvar allCharts = AmCharts.charts;\n\t\t\t\t\tvar chartIndex = null;\n\t\t\t\t\t$.each(allCharts,function(i,val){\n\t\t\t\t\t\tif (table.attr('id') === val.div.id ) {\n\t\t\t\t\t\t\tchartIndex = i;\n\t\t\t\t\t\t\treturn i;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif ( null === chartIndex ){\n\t\t\t\t\t\tAmCharts.makeChart( table.attr('id') , response.chart );\n\t\t\t\t\t\ttable.removeClass('ajax-loading');\n\t\t\t\t\t}else{\n//\t\t\t\t\t\tallCharts[chartIndex].graphs\t\t\t= response.graphs;\n\t\t\t\t\t\tallCharts[chartIndex].dataProvider\t\t= response.dataProvider;\n\t\t\t\t\t\tallCharts[chartIndex].validateData();\n\t\t\t\t\t\tallCharts[chartIndex].invalidateSize();\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif ( 'TABLE' === table.prop('tagName') ){\n\t\t\t\t\t\ttable.find('tbody').html(response.tbody);\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttable.html('');\n\t\t\t\t\t\ttable.append(response.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcsiSoftRefreshEventListener(response);\n\t\t\t}\n\t\t},\n\t\terror: aaAjaxError,\n\t});\n}\n\nfunction csiTemplateCmpFetchUserData ( userId ){\n\tvar user = userId;\n\tvar data = new FormData();\n\t//filters related to this table\n\tdata.append('action', 'csi_cmp_fetch_user_data' );\n\tdata.append('user-id', user );\n\t$.ajax({\n\t\turl: csiTemplateScript.ajaxUrl,\n\t\ttype: 'POST',\n\t\tdata: data,\n\t\tcache: false,\n\t\tdataType: 'json',\n\t\tprocessData: false,\n\t\tcontentType: false,\n\t\tbeforeSend: function () {},\n\t\tsuccess: function(response){\n\t\t\tif ( 0 === response ){\n\t\t\t\tconsole.log ( 'what?' );\n\t\t\t}else{\n\t\t\t\tif ( undefined !== response.notification ) {\n\t\t\t\t\tjconfirm ( response.notification );\n\t\t\t\t\tcsiSoftRefreshEventListener(response);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\terror: aaAjaxError,\n\t});\n}\nfunction csiInfoPopup(elementData){\n\tvar element = elementData;\n\tvar data = new FormData();\n\t$.each(element.data(),function(index,val){\n\t\tdata.append(index,val);\n\t});\n\t$.ajax({\n\t\turl: csiTemplateScript.ajaxUrl,\n\t\ttype: 'POST',\n\t\tdata: data,\n\t\tcache: false,\n\t\tdataType: 'json',\n\t\tprocessData: false,\n\t\tcontentType: false,\n\t\tbeforeSend: function () {\n\t\t},\n\t\tsuccess: function(response){\n\t\t//\tconsole.log ( response );\n\t\t\tif ( 0 === response ){\n\t\t\t}else{\n\t\t\t\tif ( undefined !== response.notification ) {\n\t\t\t\t\tjconfirm ( response.notification );\n\t\t\t\t}// response.notification\n\t\t\t\tcsiSoftRefreshEventListener(response);\n\t\t\t}\n\t\t},\n\t\terror: aaAjaxError,\n\t});\n}\nfunction csiLoadPopUpPage ( triggerElement ) {\n\tvar trigger = triggerElement;\n\tvar data = new FormData();\n\t$.each( trigger.data(), function(index,val){\n\t\tdata.append(index,val);\n\t});\n\tjconfirm ({\n\t\ttitle: trigger.data('title'),\n\t\tbackgroundDismiss: trigger.data('background-dismiss'),\n\t\ttype: trigger.data('type'),\n\t\ticon: trigger.data('icon'),\n\t\tcolumnClass: trigger.data('column-class'),\n\t\tcontainerFluid: trigger.data('container-fluid'),\n\t\tbuttons:{\n\t\t\tok:{\n\n\t\t\t},\n\t\t\tcancel:{\n\n\t\t\t}\n\t\t},\n\t\tcontent: function(){\n\t\t\tvar self = this;\n\t\t\treturn  $.ajax({\n\t\t\t \turl: csiTemplateScript.ajaxUrl,\n\t\t\t \ttype: 'POST',\n\t\t\t \tdata: data,\n\t\t\t \tcache: false,\n\t\t\t \tdataType: 'json',\n\t\t\t \tprocessData: false,\n\t\t\t \tcontentType: false,\n\t\t\t \tsuccess: function(response){\n\t\t\t\t\tself.setContent(response.content);\n\t\t\t\t\tself.setTitle(response.title);\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tcsiSoftRefreshEventListener(response);\n\t\t\t\t\t}, 300);\n\n\t\t\t \t},\n\t\t\t \terror: aaAjaxError,\n\t\t\t });\n\t\t},\n\t});\n\treturn true;\n}\nfunction csiSoftRefreshEventListener(pageResponse){\n\tvar response = pageResponse;\n\t$('[data-toggle=\"tooltip\"]').tooltip();\n\t//Execution\n\t$('.select2').each(function(i,val){\n\t\t$(this).select2({\n\t\t\ttokenSeparators: [',', ' '],\n\t\t\ttheme: 'bootstrap',\n\t\t\ttemplateSelection: csiSelect2Format,\n\t\t\ttemplateResult: csiSelect2Format,\n\t\t});\n\t});\n\t$('input.csi-datetime-range-input').daterangepicker({\n\t\ttimePicker: true,\n\t\ttimePicker24Hour: true,\n\t\t//timePickerIncrement: 10,\n\t\tcancelClass: 'btn-danger',\n\t\topens: 'center',\n\t\t//autoUpdateInput: false,\n\t\tdateLimit: {\n\t\t\tdays: 30\n\t\t},\n\t\tlocale: {\n\t\t\tformat: 'YYYY-MM-DD HH:mm',\n\t\t\tapplyLabel: 'Aceptar',\n\t\t\tcancelLabel: 'Cancelar',\n\t\t}\n\t});\n\t$('.front-end-editable').each(function(){\n\t\tvar editLink = $('<i class=\"fa fa-pencil front-end-editable-button\"></i>')\n\t\t.css ( 'cursor', 'pointer' )\n\t\t.css( 'line-height', $(this).css('line-height') )\n\t\t.css ( 'position', 'absolute' )\n\t\t.css ( 'right', '0' )\n\t\t.css ( 'top', '0' )\n\t\t.css ( 'width', '1em' )\n\t\t.click(function(event){\n\t\t\tevent.preventDefault();\n\t\t\t$(this).prev().prop('contenteditable','true').focus();\n\t\t});\n\t\t$(this).parent().css('position','relative');\n\t\t$(this).css ( 'padding-right', '1em' );\n\t\t$(this).after(editLink);\n\t});\n\t$('.input-dynamic').each( function(){\n\t\tif ( undefined !== response.dynamicFields ){\n\t\t\tif ( undefined !== $(this).data('dynamic-input') ){\n\t\t\t\tvar inputField = $(this).data('dynamic-input');\n\t\t\t\tif ( undefined !== response.dynamicFields[inputField] ){\n\t\t\t\t\tinputField = response.dynamicFields[inputField];\n\t\t\t\t\tvar inputBox = $(this);\n\t\t\t\t\tvar count = 0;\n\t\t\t\t\t$(this).next().html(inputField.addButton).click(function(event){\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tif ( count < inputField.maxFields ){\n\t\t\t\t\t\t\tinputBox.append(inputField.fieldBox);\n\t\t\t\t\t\t\tinputBox.find('.select2').select2({\n\t\t\t\t\t\t\t\ttokenSeparators: [',', ' '],\n\t\t\t\t\t\t\t\ttemplateSelection: csiSelect2Format,\n\t\t\t\t\t\t\t\ttemplateResult: csiSelect2Format,\n\t\t\t\t\t\t\t\ttheme: 'bootstrap',\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$('.csi-cmp-delete-dynamic-field-button').click(function(event){\n\t\t\t\t\t\t\t\tconsole.log ( $(this) );\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t$(this).parent().parent().remove();\n\t\t\t\t\t\t\t\tcount--;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t$.alert({\n\t\t\t\t\t\t\t\ticon\t\t\t\t\t: 'fa fa-exclamation-triangle fa-sm',\n\t\t\t\t\t\t\t\tcloseIcon\t\t\t\t: true,\n\t\t\t\t\t\t\t\tcolumnClass\t\t\t\t: 'large',\n\t\t\t\t\t\t\t\tcontent\t\t\t\t\t: 'Solo puedes agregar ' + inputField.maxFields + ' elementos.',\n\t\t\t\t\t\t\t\ttitle\t\t\t\t\t: 'Advertencia!',\n\t\t\t\t\t\t\t\ttype\t\t\t\t\t: 'orange',\n\t\t\t\t\t\t\t\tbackgroundDismiss\t\t: true,\n\t\t\t\t\t\t\t\tscrollToPreviousElement\t: false,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log ('ya son muchos');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\t$('.csi-cmp-keynote-slide-gauge').each(function(){\n\t\tvar container = $(this);\n\t\tAmCharts.makeChart( $(this).prop('id'), {\n\t\t\t'type': 'gauge',\n\t\t\t'theme': 'light',\n\t\t\t'axes': [ {\n\t\t\t\t'axisThickness'\t\t\t\t: 0,\n\t\t\t\t'axisAlpha'\t\t\t\t\t: 1,\n\t\t\t\t'startAngle'\t\t\t\t: 0,\n    \t\t\t'endAngle'\t\t\t\t\t: 360,\n\t\t\t\t//'unit'\t\t\t\t\t\t: '%',\n\t\t\t\t//'tickAlpha': 0.2,\n\t\t\t\t'valueInterval'\t\t\t\t: 100,\n\t\t\t\t'radius'\t\t\t\t\t: '125%',\n\t\t\t\t'gridInside'\t\t\t\t: true,\n\t\t\t\t//'bottomText': '0 %',\n\t\t\t\t//'bottomTextYOffset': -20,\n\t\t\t\t'endValue'\t\t\t\t\t: container.data('end-value'),\n\t\t\t\t'tickAlpha'\t\t\t\t\t: 0,\n\t\t\t\t//'minorTickInterval'\t\t\t: 10,\n\t\t\t\t'showFirstLabel'\t\t\t: false,\n\t\t\t\t'showLastLabel'\t\t\t\t: false,\n\t\t\t\t'topText'\t\t\t\t\t: container.data('top-text'),\n\t\t\t\t'topTextYOffset'\t\t\t: 25,\n\t\t\t\t//'topTextBold'\t\t\t\t: false,\n\t\t\t\t'bands'\t:[{\n\t\t\t\t\t'color'\t\t\t\t\t: container.data('back-color'),\n      \t\t\t\t'startValue'\t\t\t: 0,\n      \t\t\t\t'endValue'\t\t\t\t: 100,\n      \t\t\t\t'radius'\t\t\t\t: '100%',\n      \t\t\t\t'innerRadius'\t\t\t: '80%',\n\t\t\t\t},{\n\t\t\t\t\t'color'\t\t\t\t\t: container.data('front-color'),\n      \t\t\t\t'startValue'\t\t\t: 0,\n      \t\t\t\t'endValue'\t\t\t\t: container.data('value'),\n      \t\t\t\t'radius'\t\t\t\t: '100%',\n      \t\t\t\t'innerRadius'\t\t\t: '80%',\n\t\t\t\t},\n\t\t\t],\n\t\t\t} ],\n\t\t});\n\t});\n\t//Event Handlers\n\t$('[type=\"reset\"]').off('click').click(function(event){\n\t\tevent.preventDefault();\n\t\twindow.history.back();\n\t});\n\t$('.csi-form-additional-fields').off('hidden.bs.collapse').on('hidden.bs.collapse', function () {\n\t\t$(this).find('input, select').each(function(){\n\t\t\tif ( $(this).hasClass('select2') ) {\n\t\t\t\t$(this).select2('enable',false);\n\t\t\t\t$(this).addClass('disabled').prop('disabled',true).val('');\n\t\t\t\t//nextInput.select2('val', '');\n\t\t\t\t$(this).val('').trigger('change');\n\t\t\t}else{\n\t\t\t\t$(this).addClass('disabled').prop('disabled',true).prop('checked',false).val('');\n\t\t\t}\n\t\t});\n\t});\n\t$('.csi-form-additional-fields').off('shown.bs.collapse').on('shown.bs.collapse', function () {\n\t\t$(this).find('input, select').each(function(){\n\t\t\tif ( $(this).hasClass('select2') ) {\n\t\t\t\t$(this).select2('enable',true);\n\t\t\t\t$(this).removeClass('disabled').prop('disabled',false);\n\t\t\t\t//nextInput.select2('val', '');\n\t\t\t\t$(this).val('').trigger('change');\n\t\t\t}else{\n\t\t\t\t$(this).removeClass('disabled').prop('disabled',false);\n\t\t\t}\n\t\t});\n\t});\n\t$('.csi-popup-page').off('click').click(function(event){\n\t\tevent.preventDefault();\n\t\tcsiLoadPopUpPage ( $(this) );\n\t});\n\t$('.csi-popup').off('click').click(function(event){\n\t\tevent.preventDefault();\n\t\tcsiInfoPopup ( $(this) );\n\t});\n\t$('.refresh-button').off('click').click( function(event){\n\t\tevent.preventDefault();\n\t\tcsiTemplateCmpFetchTableContent ( $( $(this).attr('href') ) );\n\t});\n\t$('.csi-2ble-click').off('dblclick').dblclick(function(event){\n\t\tvar element = $(this);\n\t\tif( false === element.hasClass('active') ){\n\t\t\telement.children().toggle();\n\t\t\telement.find('select').focus();\n\t\t\telement.find('select').change(function(){\n\t\t\t\t$(this).trigger('blur');\n\t\t\t\t$(this).closest('form').submit();\n\t\t\t\telement.find('.csi-2ble-click-front').html( $(this).find(':selected').text() );\n\t\t\t});\n\t\t\telement.find('select').blur(function(){\n\t\t\t\telement.children().toggle();\n\t\t\t});\n\t\t}\n\t});\n\t$('.edit-table-button').off('click').click( function(event){\n\t\tevent.preventDefault();\n\t\tif (  undefined !== $(this).attr('href') ) {\n\t\t\tvar target = $( $(this).attr('href') );\n\t\t\tif ( undefined !== target.data('action') && undefined !== $(this).data('action') ) {\n\t\t\t\tif ( target.data('action') !== $(this).data('action') ){\n\t\t\t\t\ttarget.data( 'action', $(this).data('action') );\n\t\t\t\t}else{\n\t\t\t\t\ttarget.data( 'action', $(this).data('old-action') );\n\t\t\t\t}\n\t\t\t\tcsiTemplateCmpFetchTableContent ( target );\n\t\t\t}else{\n\t\t\t\tconsole.log ( target );\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.log ( '.edit-table-button href attribute not defined.');\n\t\t\tconsole.log ( $(this) );\n\t\t}\n\t});\n\t$('.user-data').off('click').click( function(event){\n\t\tevent.preventDefault();\n\t\tcsiTemplateCmpFetchUserData( $(this).data('user-id') );\n\t});\n\t$('input.csi-datetime-range-input').on('apply.daterangepicker', function(ev, picker) {\n\t\t$(this).val ( picker.startDate.format('YYYY-MM-DD HH:mm') + ' - ' + picker.endDate.format('YYYY-MM-DD HH:mm') );\n\t\tvar ms = picker.endDate.diff(picker.startDate);\n\t\tvar d = moment.duration(ms);\n\t\tvar s = Math.round(d.asHours() * 10) / 10;\n\t\t$(this).next().html( s + ' horas');\n\t\tif (10 < s || 0 === s ){\n\t\t\t$.alert({\n\t\t\t\tbuttons\t\t\t\t\t: {\n\t\t\t\t\tOK\t\t\t\t\t: {\n\t\t\t\t\t\ttext\t\t\t: 'OK',\n\t\t\t\t\t\tbtnClass\t\t: 'btn-warning',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ticon\t\t\t\t\t: 'fa fa-exclamation-triangle fa-sm',\n\t\t\t\tcloseIcon\t\t\t\t: true,\n\t\t\t\tcolumnClass\t\t\t\t: 'large',\n\t\t\t\tcontent\t\t\t\t\t: 'Estas seleccionando una duración ' + s + ' horas.',\n\t\t\t\ttitle\t\t\t\t\t: 'Cuidado',\n\t\t\t\ttype\t\t\t\t\t: 'orange',\n\t\t\t\tscrollToPreviousElement\t: false,\n\t\t\t});\n\t\t}\n\t});\n\t$('.in-table-info-button').off('click').click(function(event){\n\t\tevent.preventDefault();\n\t\tvar button = $(this);\n\t\tvar data = new FormData();\n\t\t$.each($(this).data(),function(index,val){\n\t\t\tdata.append(index,val);\n\t\t});\n\t\tvar cell = button.closest('tr');\n\t\t$.ajax({\n\t\t\turl: csiTemplateScript.ajaxUrl,\n\t\t\ttype: 'POST',\n\t\t\tdata: data,\n\t\t\tcache: false,\n\t\t\tdataType: 'json',\n\t\t\tprocessData: false,\n\t\t\tcontentType: false,\n\t\t\tbeforeSend: function () {\n\t\t\t\tcell.addClass('ajax-loading');\n\t\t\t},\n\t\t\tsuccess: function(response){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tcell.removeClass('ajax-loading');\n\t\t\t\t}, 300);\n\t\t\t\tif ( 0 === response ){\n\t\t\t\t\tconsole.log( $(response.message) );\n\t\t\t\t}else{\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: aaAjaxError,\n\t\t});\n\t});\n\t$('.in-table-form-button').off('click').click(function(event){\n\t\tevent.preventDefault();\n\t\tvar button = $(this);\n\t\tvar data = new FormData();\n\t\t$.each($(this).data(),function(index,val){\n\t\t\tdata.append(index,val);\n\t\t});\n\t\tvar cell = button.closest('tr');\n\t\t$.ajax({\n\t\t\turl: csiTemplateScript.ajaxUrl,\n\t\t\ttype: 'POST',\n\t\t\tdata: data,\n\t\t\tcache: false,\n\t\t\tdataType: 'json',\n\t\t\tprocessData: false,\n\t\t\tcontentType: false,\n\t\t\tbeforeSend: function () {\n\t\t\t\tcell.addClass('ajax-loading');\n\t\t\t},\n\t\t\tsuccess: function(response){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tcell.removeClass('ajax-loading');\n\t\t\t\t}, 300);\n\t\t\t\tif ( 0 === response ){\n\t\t\t\t}else{\n\t\t\t\t\tcell.html ( $('<td colspan=\"999\" class=\"active\">' + response.message + '</td>' ) );\n\t\t\t\t\tcsiSoftRefreshEventListener(response);\n\t\t\t\t\tcell.find('.in-table-form-cancel').off('click').click(function(event){\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tcsiTemplateCmpFetchTableContent( $(this).closest('.refreshable') );\n\t\t\t\t\t});\n\t\t\t\t\tcell.find('.csi-switchable-radio-button').off('change').change(function(){\n\t\t\t\t\t\tcell.find('.csi-switchable-radio-button').each(function(){\n\t\t\t\t\t\t\tvar nextInput = $(this).parent().next('input, select').first();\n\t\t\t\t\t\t\tif ( $(this).is(':checked') ){\n\t\t\t\t\t\t\t\tif ( nextInput.hasClass('select2') ) {\n\t\t\t\t\t\t\t\t\tnextInput.select2('enable');\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tnextInput.removeClass('disabled').prop('disabled',false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tif ( nextInput.hasClass('select2') ) {\n\t\t\t\t\t\t\t\t\tconsole.log ( nextInput );\n\t\t\t\t\t\t\t\t\tnextInput.select2('enable',false);\n\t\t\t\t\t\t\t\t\tnextInput.addClass('disabled').prop('disabled',true).val('');\n\t\t\t\t\t\t\t\t\t//nextInput.select2('val', '');\n\t\t\t\t\t\t\t\t\tnextInput.val('').trigger('change');\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tnextInput.addClass('disabled').prop('disabled',true).val('');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: aaAjaxError,\n\t\t});\n\t});\n\t$('form').off('submit').submit(function(){\n\t\tvar form = $(this);\n\t\tvar data = new FormData();\n\t\tdata.append('action', form.data('function'));\n//\t\tconsole.log( $(this).find('input, select, textarea, checkbox') );\n\t\t$(this).find('input, select, textarea, checkbox').each(function(){\n\t\t\tif ( $(this).is(':checkbox, :radio') ) {\n\t\t\t\tif ( $(this).prop('checked') ) {\n\t\t\t\t\tdata.append($(this).attr('name'),$(this).val());\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tdata.append($(this).attr('name'),$(this).val());\n\t\t\t}\n\t\t});\n\t\t$.ajax({\n\t\t\turl: csiTemplateScript.ajaxUrl,\n\t\t\ttype: 'POST',\n\t\t\tdata: data,\n\t\t\tcache: false,\n\t\t\tdataType: 'json',\n\t\t\tprocessData: false,\n\t\t\tcontentType: false,\n\t\t\tbeforeSend: function () {\n\t\t\t\tform.addClass('ajax-loading');\n\t\t\t},\n\t\t\tsuccess: function(response){\n\t\t\t\tform.removeClass('ajax-loading');\n\t\t\t\tconsole.log ( response );\n\t\t\t\tif ( 0 === response ){\n\t\t\t\t}else{\n\t\t\t\t\tif ( undefined !== response.error){\n\t\t\t\t\t\t//error al crear plan\n\t\t\t\t\t}else{\n\t\t\t\t\t\t//plan creado correctamente\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( undefined !== response.notification ) {\n\t\t\t\t\t\tswitch ( response.postSubmitAction ){\n\t\t\t\t\t\t\tcase 'changeHash':\n\t\t\t\t\t\t\t\tif ( undefined === response.notifStopNextPage ){\n\t\t\t\t\t\t\t\t\t//http://stackoverflow.com/a/34567019/5129222\n\t\t\t\t\t\t\t\t\tresponse.notification.onClose = changeHash.bind(null,form.data('next-page') );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'refreshParent':\n\t\t\t\t\t\t\t\tresponse.notification.onClose = csiTemplateCmpFetchTableContent.bind(null,form.closest('.refreshable'));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tresponse.notification.onClose = function(){};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tjconfirm ( response.notification );\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif ( undefined !== response.postSubmitAction ){\n\t\t\t\t\t\t\tswitch ( response.postSubmitAction ){\n\t\t\t\t\t\t\t\tcase 'changeHash':\n\t\t\t\t\t\t\t\t\tchangeHash( form.data('next-page') );\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'refreshParent':\n\t\t\t\t\t\t\t\t\tcsiTemplateCmpFetchTableContent( form.closest('.refreshable') );\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: aaAjaxError,\n\t\t});\n\t\treturn false;\n\t});\n}\nfunction csiHardRefreshEventListener(pageResponse){\n\tvar response = pageResponse;\n\t$.each ( $('.refreshable'), function(){\n\t\tcsiTemplateCmpFetchTableContent ( $(this) );\n\t});\n\t$.each ( $('.auto-refreshable'), function(){\n\t\tif (undefined !== $(this).data('auto-refresh-timelapse') ){\n\t\t\tvar element = $(this);\n\t\t\tvar interval = setInterval(function(){\n\t\t\t\tif ( $.contains(window.document, element[0]) ){\n\t\t\t\t\tcsiTemplateCmpFetchTableContent ( element );\n\t\t\t\t}else{\n\t\t\t\t\tclearInterval ( interval );\n\t\t\t\t}\n\t\t\t}, $(this).data('auto-refresh-timelapse') );\n\t\t}\n\t});\n\tcsiSoftRefreshEventListener(response);\n}\nfunction csiSelect2Format(option) {\n    var opt = option.element;\n\tvar response=$('<span class=\"csi-cmp-online-form-select\"></span>');\n\tif ( undefined === $(opt).data('icon') ){\n\t\treturn option.text;\n\t}\n\tif ( undefined !== $(opt).data('icon') ) {\n\t\tresponse.append ( '<i class=\"' + $(opt).data('icon') + '\"></i>&nbsp;' );\n\t}\n\tif ( undefined !== $(opt).data('txt-color') ) {\n\t\tresponse.css ( 'color', $(opt).data('color') );\n\t}\n\tif ( undefined !== $(opt).data('bg-color') ) {\n\t\tresponse.css ( 'background-color', $(opt).data('bg-color') );\n\t}\n\tresponse.append ( option.text );\n\treturn response;\n    //return '<span style=\"color:' + $(originalOption).data('color') + '\"><i class=\"fa ' + $(originalOption).data('icon') + '\"></i> ' + icon.text + '</span>';\n}\n\n});\n"],"sourceRoot":"/source/"}