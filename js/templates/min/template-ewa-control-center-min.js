jQuery(document).ready(function($){function e(){var e=$("#csi-ewa-template-control-center-alerts tbody"),o=new FormData;o.append("action","csi_ajax_template_ewa_control_center_fetch_alerts"),o.append("date",$("#csi-ewa-template-control-center-date-input").val()),o.append("action_flag",$("#csi-ewa-template-control-center-action-checkbox").is(":checked")),o.append("filter_customer",$("#csi-ewa-template-control-center-filter-customer").val()),o.append("filter_sid",$("#csi-ewa-template-control-center-filter-sid").val()),o.append("filter_group",$("#csi-ewa-template-control-center-filter-alert-group").val()),o.append("filter_text",$("#csi-ewa-template-control-center-filter-alert-text").val()),$.ajax({url:a,type:"POST",data:o,cache:!1,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){e.addClass("loading")},success:function(a){if(void 0===a.error){e.fadeOut(400,function(){e.html(a.tbody),e.fadeIn(),e.find("form.csi-ewa-template-control-center-alert-form").submit(function(e){e.preventDefault(),t($(this))})}),$("#csi-ewa-template-control-center-date-input + label").html(a.date);var n=$("#csi-ewa-template-control-center-infographics");n.html(a.graphsContainer);var o=$(a.graphs);o.each(function(e,t){new JustGage(t)})}},error:n})}function t(t){if(window.console.log(t),""===t.find("input[type=text]").val())return t.find("input[type=text]").parent().parent().addClass("has-error"),!1;var o=new FormData;o.append("action","csi_ajax_template_ewa_control_center_update_alerts"),o.append("alert_id",t.data("alert-id")),o.append("action_party_id",t.find("select[name=action_party_id]").val()),o.append("action_id",t.find("input[name=action_id]").val()),o.append("customer_flag",t.find("input[name=customer_flag]").is(":checked")),$.ajax({url:a,type:"POST",data:o,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(t){window.console.log(JSON.stringify(t)),void 0===t.error&&e()},error:n})}var a=csiTemplateEwaControlCenter.ajaxurl;$("#csi-ewa-template-control-center-date-input").datepicker({onSelect:function(t){$("#csi-ewa-template-control-center-date-input").val(t),e()},dateFormat:"yy-mm-dd",firstDay:1,showWeek:!0}),$("#csi-ewa-template-control-center-date-input + label").click(function(){$("#csi-ewa-template-control-center-date-input").datepicker("show")}),$("#csi-ewa-template-control-center-action-checkbox").change(function(){e()}),$("#csi-ewa-template-control-center-filter-customer").change(function(){e()}),$("#csi-ewa-template-control-center-filter-sid").change(function(){e()}),$("#csi-ewa-template-control-center-filter-alert-group").change(function(){e()}),$("#csi-ewa-template-control-center-filter-alert-text").change(function(){e()}),$(document).on({ajaxStart:function(){$("#csi-ewa-template-control-center-ajax").addClass("csi-ajax-loading")},ajaxStop:function(){$("#csi-ewa-template-control-center-ajax").removeClass("csi-ajax-loading")}}),e();var n=function(e,t,n){var o="";o=0===e.status?"Not connect.\n Verify Network.":404===e.status?"Requested page not found. [404]":500===e.status?"Internal Server Error [500].":"parsererror"===t?"Requested JSON parse failed.":"timeout"===t?"Time out error.":"abort"===t?"Ajax request aborted.":"Uncaught Error.\n"+e.responseText,window.console.log("ERROR: "),window.console.log(e),window.console.log(t+" - "+n);var r="Este error de conexión con el servidor de fondo, regularmente indica que no has iniciado sesión en Wordpress.<br/>";window.console.log(a);var c=a.replace("admin-ajax.php","");r=r+"Intenta <strong><a href='"+c+"'>iniciar sesi&oacute;n</a></strong>. En caso que esto no funcione, por favor contacta al adminsitrador.",r=r+"<code>"+o+"</code>";var i="Error de conexión as&iacute;ncrona";$.alert({buttons:{heyThere:{text:"OK",btnClass:"btn-danger"}},closeIcon:!0,columnClass:"large",content:r,title:i,type:"red"})}});